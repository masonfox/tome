--- lib/repositories/progress.repository.ts
+++ lib/repositories/progress.repository.ts
@@ -4,6 +4,7 @@ import { progressLogs, ProgressLog, NewProgressLog } from "@/lib/db/schema/prog
 import { readingSessions } from "@/lib/db/schema/reading-sessions";
 import { books } from "@/lib/db/schema/books";
 import { db } from "@/lib/db/sqlite";
+import { calculatePercentage } from "@/lib/utils/progress-calculations";
 
 export class ProgressRepository extends BaseRepository<
   ProgressLog,
@@ -490,8 +491,6 @@ export class ProgressRepository extends BaseRepository<
     newTotalPages: number,
     tx?: any
   ): number {
-    // Import synchronously since we're in a transaction callback
-    const { calculatePercentage } = require("../utils/progress-calculations");
     const database = tx || this.getDatabase();
 
     // 1. Find active sessions for this book
