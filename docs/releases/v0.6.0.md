# Tome v0.6.0 - OPDS Integration & Quality Improvements

**Release Date:** February 5, 2026

This release introduces comprehensive OPDS 1.2 support, enabling seamless e-reader and mobile app integration with your Calibre library through Tome. Download books directly to your Kobo, Kindle (via KOReader), or mobile reading apps! We've also refined date handling throughout the application and made numerous quality-of-life improvements.

## ‚ú® What's New

### üìñ OPDS 1.2 E-Reader Integration

Connect your e-reader or reading app directly to Tome and browse your Calibre library without leaving your device!

**What you can do:**
- **Browse your library** - Access your entire Calibre collection from any OPDS-compatible device
- **Smart navigation** - Browse by authors, series, tags, shelves, reading status, and ratings
- **Search functionality** - Full-text search with OpenSearch descriptor support
- **Direct downloads** - Download books in all available formats (EPUB, MOBI, PDF, AZW3, etc.)
- **View metadata** - See book covers, descriptions, ratings, and reading status
- **Recent books** - Quick access to recently added titles
- **Tome integration** - Your reading status, custom ratings, and shelves are seamlessly integrated

**Compatible devices and apps:**
- E-readers: KOReader, Kobo (4.0+), PocketBook (5.0+), Tolino
- Mobile apps: Moon+ Reader, Readest, FBReader, Librera Reader
- Any OPDS 1.2-compatible client

**Setup is simple:**
1. Add catalog in your app: `http://your-tome-server:3000/api/opds`
2. Username: `tome`
3. Password: Your `AUTH_PASSWORD` (if set)

See [docs/OPDS.md](../OPDS.md) for complete setup instructions and device-specific guides.

**Technical highlights:**
- **2000+ tests** - Comprehensive unit, integration, and security test coverage
- **High performance** - Efficient cover caching with ETag support
- **Secure** - Optional HTTP Basic Auth with rate-limiting ready
- **Standards compliant** - Full OPDS 1.2 specification compliance

### üìÖ Enhanced Date Handling

Significant improvements to date handling across the application:

**What's better:**
- **Calendar-aware validation** - Replaced regex-only validation with proper date validation (#334)
- **Pre-2001 timestamp support** - Fixed migration issues with historical Unix timestamps (#337)
- **Consolidated date fields** - DNF date merged into completedDate for consistency (#335)
- **Frontend compliance** - Enforced ADR-014 date string format throughout UI (#332)
- **Helper utilities** - New formatDate helpers for consistent ISO date handling (#339)

These changes ensure rock-solid date handling, especially for long-running reading sessions and historical data.

### üóëÔ∏è Session Deletion

Delete reading sessions when needed, with automatic session management:

**Features:**
- **Confirmation modal** - Prevents accidental deletions
- **Smart session handling** - Creates new active session when deleting the current one (#333)
- **Clean history** - Remove false starts or duplicate sessions
- **Preserves data integrity** - Maintains reading history and statistics

## üé® Visual & UX Improvements

### Mobile & PWA
- **Safe area spacing** - Better content layout in PWA mode with proper insets
- **iOS bottom sheets** - Added safe area support for iOS devices (#321)
- **Responsive layouts** - Improved dashboard and goal page layouts

### Desktop
- **Sidebar polish** - Updated active/hover states for light and dark modes
- **Skeleton loaders** - Enhanced skeleton states to eliminate layout shifts
- **Button shadows** - Comprehensive button shadow system with reusable Button component (#327)

### Book Displays
- **Cover shadows** - Added depth with shadow effects on book covers (#324)
- **Author links** - Improved author navigation from Currently Reading and book details (#325)
- **Card spacing** - Refined title/author spacing in BookCards

### Modals & UI Elements
- **Modal animations** - Fixed animation and layout issues (#323)
- **Bottom sheet sizing** - New size options for better content fit
- **Action bar positioning** - Fixed bulk action bar to respect safe areas
- **Progress modal** - Moved submit button to action bar for better ergonomics (#326)

## üêõ Notable Bug Fixes

### Data & State Management
- **Status flash fix** - Eliminated flickering when navigating between books (#318)
- **Optimistic UI** - Better status synchronization with optimistic override pattern
- **Cache invalidation** - Fixed stale data on read-next page after status changes (#307)
- **Session edit race condition** - Resolved timing issues in session edit modal (#308)

### Goals & Navigation
- **Month navigation** - Fixed navigation in All Year mode on goals page (#320)
- **Goals page UI** - Enhanced layout with monthly filtering (#319)

### UI & Display
- **Markdown editor** - Proper dynamic import pattern for skeleton loading (#322)
- **Read Next height** - Consistent empty state height with Currently Reading

### Calibre Integration
- **Busy timeout** - Reduced to 10s for better balance with Calibre 9.x
- **Journal mode** - Skip pragma in auto mode for improved compatibility

## üîß Technical Improvements

### Testing
- **Test coverage** - Improved from 77% to 85%+ (#304)
- **2000+ tests passing** - Including comprehensive OPDS test suite
- **Repository Pattern** - All OPDS endpoints follow repository pattern (no direct DB access)

### Architecture
- **Companion migrations** - Fixed detection and compilation (#310)
- **Boot logging** - Unified logging across startup process
- **Cover caching** - High-performance system with ETag support
- **Query optimization** - Extended Calibre queries for efficient OPDS feeds

### Developer Experience
- **CI improvements** - Skip PR checks on draft PRs for faster iteration
- **Build process** - Build companion migrations before tests
- **Documentation** - Comprehensive OPDS setup guide and API documentation

## üì¶ Installation

### Docker (Recommended)

```bash
# Pull the latest release
docker pull ghcr.io/masonfox/tome:0.6.0

# Or use latest tag
docker pull ghcr.io/masonfox/tome:latest
```

**Example Docker Compose:**

```yaml
services:
  tome:
    image: ghcr.io/masonfox/tome:0.6.0
    ports:
      - "3000:3000"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=America/New_York
      - CALIBRE_LIBRARY_PATH=/calibre
      - AUTH_PASSWORD=your-secure-password  # Optional, recommended for OPDS
    volumes:
      - /path/to/data:/app/data
      - /path/to/calibre:/calibre:ro
```

**Note on AUTH_PASSWORD:**
- Optional for local-only deployments
- **Recommended** if accessible publicly or using OPDS
- Secures both web UI and OPDS catalog access

## üîÑ Upgrading

**From v0.5.x to v0.6.0:**

‚úÖ **Fully automatic** - just pull and restart!

- All migrations run automatically on startup
- Existing data is fully preserved (including date migrations)
- New OPDS endpoints available immediately
- No configuration changes required

**From earlier versions:**
- Upgrade to v0.5.0 first, then to v0.6.0
- Database backups are created automatically

## üìä By the Numbers

- **262 commits** since v0.5.0
- **7,781 lines added** (primarily OPDS implementation)
- **116 lines removed**
- **Major features:** OPDS 1.2 support, Enhanced date handling, Session deletion
- **486 new OPDS tests** added
- **44 files changed**
- **15 new OPDS API endpoints**

## üéØ What's Next

Looking ahead to v0.7.0 and beyond:
- Enhanced reading analytics and insights
- Additional OPDS features (acquisitions, collections)
- More import/export options
- Community-requested features (check our GitHub issues!)

## üôè Thank You

Special thanks to everyone who:
- Reported issues with date handling and timezone bugs
- Requested OPDS support (issue #171)
- Tested pre-release builds
- Provided feedback on session management

Your contributions make Tome better for everyone!

Appreciation to:
- The **Calibre project** for the excellent library management foundation
- The **OPDS community** for maintaining open standards
- The **open source ecosystem** for the amazing tools that power Tome

## üìù Full Changelog

For a complete list of all changes, see the [commit history](https://github.com/masonfox/tome/compare/v0.5.0...v0.6.0).

### Key Pull Requests

- #340 - Add OPDS 1.2 support
- #339 - Refactor: Clean up ISO date handling and add formatDate helpers
- #337 - fix: handle pre-2001 Unix timestamps in progress date migration
- #335 - Consolidate dnfDate into completedDate
- #334 - fix: Replace regex-only date validation with calendar-aware validation
- #333 - Fix: Delete session now creates active session for all cases
- #332 - fix: enforce ADR-014 date string compliance in frontend
- #331 - Add session deletion feature with confirmation modal
- #327 - Implement comprehensive button shadow system with reusable Button component
- #326 - Move Log Progress modal submit button to action bar
- #325 - Improve Currently Reading and book detail author links
- #324 - Add shadow effects to book covers
- #323 - Fix modal animations and layout issues
- #322 - refactor: move markdown editor skeleton loading to proper dynamic import pattern
- #321 - fix: add iOS safe area support to bottom sheets
- #320 - Fix month navigation in All Year mode on goals page
- #319 - Refactor /goals page: Enhanced UI with monthly filtering and improved layout
- #318 - Fix status flash on book detail page
- #315 - Polish v0.5: Visual improvements and consistency updates

---

**Upgrade today and connect your e-reader!** üìöüìñ

Visit our [GitHub repository](https://github.com/masonfox/tome) for questions and support.

**New to Tome?** Check out our [demo site](https://demo.tome.app) (read-only mode) to explore features before installing.
