# Tome v0.3.0 - Goals, Series, and Journal

**Release Date:** December 23, 2025

This is our biggest release yet! Set reading goals, organize your books by series, and keep a detailed reading journal. We've also completely rebuilt how Tome manages data for better performance and reliability.

## ‚ú® What's New

### üìä Annual Reading Goals

Set and track your reading goals throughout the year!

**What you can do:**
- **Set page or book goals**: Track by pages read or books completed
- **See your progress visually**: Beautiful charts show how you're doing
- **Monthly breakdown**: See which months you read the most
- **Multiple goals**: Have different goals for different years
- **Goal insights**: See which books count toward each goal

**How to use it:**
1. Visit the new Goals page from the navigation
2. Click "Create New Goal"
3. Choose pages or books, set your target, pick your year
4. Watch your progress grow as you read!

### üìö Series Support

Finally! Organize and track your book series.

**What you get:**
- **Automatic series detection**: Tome finds series information from your Calibre library
- **Series overview**: See all books in a series at a glance
- **Reading progress**: Track which books you've read in each series
- **Series browser**: Browse all your series on the new Series page
- **Smart sorting**: Books are ordered correctly within each series

**How it works:**
- Series information comes from your Calibre metadata
- Visit the Series page to explore
- Click any series to see all its books
- See series badges on book cards throughout the app

### üìñ Journal Page

A new way to view your reading history!

**Features:**
- **Timeline view**: See all your reading activity in chronological order
- **Archive navigation**: Browse by year and month
- **Rich entries**: View progress logs, sessions, and notes
- **Search and filter**: Find specific reading moments
- **Edit on the go**: Update any journal entry right from the timeline

**Access it:**
- New Journal tab in the navigation
- View your entire reading journey in one place
- Collapsible archive tree for easy date navigation

### üé® Desktop Sidebar Navigation

Better navigation for desktop users!

**New sidebar features:**
- **Always visible**: Navigation is always accessible on desktop screens
- **Collapsible**: Hide it when you need more space
- **Quick access**: All major features at your fingertips
- **Active indicators**: See which page you're on
- **Responsive**: Automatically adapts to screen size

### ‚ö° TanStack Query Migration

Under the hood, we've completely rebuilt how Tome manages data.

**What this means for you:**
- **Faster loading**: Pages load instantly with smart caching
- **Better offline support**: Recently viewed data stays available
- **Automatic updates**: Data refreshes when needed without manual reloading
- **Smoother experience**: No more loading spinners everywhere
- **More reliable**: Better error handling and retry logic

### üìù Rich Text Editing with MDXEditor

Write beautiful notes and reviews with markdown support!

**New editor features:**
- **Live preview**: See formatted text as you type
- **Markdown shortcuts**: **bold**, *italic*, lists, and more
- **Full-screen mode**: Expand the editor when writing longer entries
- **Auto-save drafts**: Never lose your work
- **Syntax highlighting**: Code blocks look great if you need them

**Available everywhere:**
- Progress log notes
- Book reviews
- Session notes
- Journal entries

### üìë Library Sorting

Sort your library exactly how you want!

**11 sorting options:**
- Title (A-Z or Z-A)
- Author (A-Z or Z-A)
- Date Added (newest or oldest first)
- Progress (highest or lowest first)
- Page Count (most or least pages)
- Rating (highest or lowest first)

**Plus:**
- Sort persists across sessions
- Combine with filters for powerful organization
- Improved infinite scroll performance

### ‚ö° Quick Progress Logging

Log progress faster from your dashboard!

**Features:**
- **One-click access**: Log progress button on each currently reading book
- **Quick completion**: Mark books as read directly from the dashboard
- **Smart modal**: Opens right-sized for fast entry
- **Keyboard friendly**: Hit Enter to submit

### üì± Enhanced Mobile Experience

Tons of mobile improvements!

**What's better:**
- **Skeleton loading**: See layouts while data loads
- **Scroll-to-top buttons**: Quickly jump to the top on long pages
- **Scroll position memory**: Return to where you were when navigating back
- **Better touch targets**: Easier to tap buttons and links
- **Smoother animations**: Page transitions feel native

### üé® Visual Improvements

The app looks better than ever!

**New visuals:**
- **Colored status icons**: Quickly identify book statuses at a glance
- **Star rating display**: Beautiful star icons in filters and cards
- **Better badges**: Series numbers and status badges are clearer
- **Improved contrasts**: Everything is easier to read
- **Consistent spacing**: More polished throughout

## üêõ Bug Fixes & Improvements

### Major Fixes
- **Streak graph timezone issues** (#68, #65): Dates now show correctly regardless of timezone
- **Library cache invalidation**: Finishing books from dashboard now updates library immediately
- **Reading history display**: Fixed books with single sessions not showing history
- **Status badges**: Now show correctly for archived "read" sessions on series page
- **Mobile zoom**: Prevented unwanted zooming when tapping input fields
- **Cursor alignment**: Fixed markdown editor cursor position issues
- **Keyboard handling**: Proper keyboard dismissal on mobile

### Performance Improvements
- **Memoized navigation**: Reduced unnecessary re-renders
- **Library infinite scroll**: Faster loading and smoother scrolling
- **Query caching**: Smarter data fetching across the app
- **Optimized images**: Better cover image loading
- **Reduced bundle size**: Faster initial page loads

### UI/UX Polish
- **Explicit search button**: No more auto-debounce confusion in library search
- **Clear All filters button**: Quickly reset all library filters
- **Better modal sizing**: Edit modals are larger and easier to use on desktop
- **Escape key shortcuts**: Close modals quickly
- **Focus management**: Better keyboard navigation throughout
- **Loading states**: Clearer feedback when data is loading

### Developer Experience
- **CodeCov integration**: Automated test coverage tracking
- **Comprehensive tests**: 1,400+ tests covering all major features
- **Better error handling**: More informative error messages
- **Improved logging**: Easier debugging and monitoring

## üîÑ Migration Notes

**From v0.2.0 to v0.3.0:**

‚úÖ **Fully automatic** - Just pull the new version and restart!

- New database migrations run automatically on startup
- All existing data is preserved
- New features are available immediately
- No configuration changes needed
- Backwards compatible with v0.2.0 databases

**What gets added:**
- Reading goals table
- Series indexes for better performance
- Streak opt-in preference column

## üì¶ Installation

### Docker (Recommended)

```bash
# Pull the latest release
docker pull ghcr.io/masonfox/tome:latest

# Or specify v0.3.0 exactly
docker pull ghcr.io/masonfox/tome:0.3.0
```

### Docker Compose

Update your `docker-compose.yml`:

```yaml
services:
  tome:
    image: ghcr.io/masonfox/tome:0.3.0
    # ... rest of your configuration
```

Then restart:

```bash
docker-compose pull
docker-compose up -d
```

## üîß Technical Details

### New API Endpoints

**Reading Goals:**
- `GET /api/reading-goals` - List all goals
- `POST /api/reading-goals` - Create new goal
- `GET /api/reading-goals/[id]` - Get goal details
- `PATCH /api/reading-goals/[id]` - Update goal
- `DELETE /api/reading-goals/[id]` - Delete goal
- `GET /api/reading-goals/books` - Books for current goals
- `GET /api/reading-goals/monthly` - Monthly progress breakdown

**Series:**
- `GET /api/series` - List all series
- `GET /api/series/[name]` - Get series details with books

**Journal:**
- `GET /api/journal` - Get journal entries for date range
- `GET /api/journal/archive` - Get archive tree structure

**Book Covers:**
- `GET /api/books/[id]/cover` - Optimized book cover serving

**Book Updates:**
- `PATCH /api/books/[id]` - Update book properties (supports totalPages, etc.)

### New Database Migrations

- **0010_organic_maginty.sql**: Reading goals schema
- **0011_add_series_indexes.sql**: Series performance indexes
- **0012_add_streak_enabled_opt_in.sql**: User streak preferences
- **0013_optimize_series_indexes.sql**: Enhanced series indexing

### New Components

**Pages:**
- `app/goals/page.tsx` - Reading goals management
- `app/series/page.tsx` - Series browser
- `app/series/[name]/page.tsx` - Individual series view
- `app/journal/page.tsx` - Reading journal timeline

**Major Components:**
- `DesktopSidebar` - Collapsible desktop navigation
- `ReadingGoalChart` - Goal progress visualization
- `ReadingGoalForm` - Goal creation/editing
- `SeriesCard` - Series display card
- `JournalEntryList` - Timeline entry list
- `JournalArchiveTree` - Archive navigation
- `MarkdownEditor` - Rich text editor
- `MarkdownRenderer` - Markdown display
- `LogProgressModal` - Quick progress logging
- `ScrollToTopButton` - Scroll navigation

**Custom Hooks:**
- `useReadingGoals` - Reading goals data management
- `useDashboard` - Dashboard data with TanStack Query
- `useStats` - Stats page data management
- `useStreak` - Streak data and analytics
- `useDraftNote` - Draft persistence for notes
- `useDraftField` - Draft persistence for form fields
- `useSidebarCollapsed` - Sidebar state management

### Dependencies Added

- `@mdxeditor/editor` (^3.52.1) - Rich markdown editing
- `@tanstack/react-query` (^5.90.12) - State management
- `@tanstack/react-query-devtools` (^5.91.1) - Query debugging
- `@tailwindcss/typography` (^0.5.19) - Markdown styling
- `react-markdown` (^10.1.0) - Markdown rendering
- `rehype-raw` (^7.0.0) - HTML in markdown
- `rehype-sanitize` (^6.0.0) - XSS protection
- `remark-gfm` (^4.0.1) - GitHub Flavored Markdown

## üìä Statistics

- **83 commits** since v0.2.0
- **31,406 lines added**
- **220 files changed**
- **1,400+ tests** passing
- **12 major features** added
- **15+ bug fixes**

## üôè Thank You

This release represents months of development and wouldn't be possible without:

- Everyone who reported bugs and suggested features
- The Calibre project for the amazing library management foundation
- The open source community for the excellent tools and libraries

## üìù Full Changelog

For a complete list of all changes, see the [commit history](https://github.com/masonfox/tome/compare/v0.2.0...v0.3.0).

## üêõ Known Issues

- Minor test failures in some LibraryFilters tests (non-blocking)
- Some edge cases with series detection from Calibre metadata

These will be addressed in v0.3.1.

## üîú What's Next

Looking ahead to v0.3.1 and beyond:

- Reading statistics improvements
- Custom book lists and collections
- Enhanced search capabilities
- Reading challenges and badges
- Social features (optional)

---

**Upgrade today and take your reading tracking to the next level!** üìö

Questions? Issues? Visit our [GitHub repository](https://github.com/masonfox/tome) or open an issue.
